<RTACModule>
  <POU>
    <ExportSource>
      <Schema>27</Schema>
      <DeviceMOT>3530</DeviceMOT>
    </ExportSource>
    <Name>IED751_COMANDOS</Name>
    <POUKind>Program</POUKind>
    <Content>
      <Interface>PROGRAM IED751_COMANDOS
VAR
	SCADA : BOOL;
	RB_RELES : BOOL;
	VAR_LATCH_1 : BOOL;
	VAR_LATCH_2 : BOOL;
	VAR_LATCH_3 : BOOL;
	VAR_LATCH_4 : BOOL;
	VAR_LATCH_5 : BOOL;
	VAR_PULSO : BOOL;
	MONITOR_COMANDOS : MONITORAMENTO_COMANDOS;
END_VAR
</Interface>
      <Implementation>// COMANDOS DO SCADA
SCADA := IED751_DNP.BO_00000.operPulse.ctlVal OR IED751_DNP.BO_00001.operPulse.ctlVal
	OR IED751_DNP.BO_00002.operPulse.ctlVal OR IED751_DNP.BO_00003.operPulse.ctlVal 
	OR IED751_DNP.BO_00004.operPulse.ctlVal OR IED751_DNP.BO_00005.operPulse.ctlVal
	OR IED751_DNP.BO_00006.operPulse.ctlVal OR IED751_DNP.BO_00007.operPulse.ctlVal 
	OR IED751_DNP.BO_00008.operPulse.ctlVal OR IED751_DNP.BO_00009.operPulse.ctlVal 
	OR IED751_DNP.BO_00010.operPulse.ctlVal OR IED751_DNP.BO_00011.operPulse.ctlVal;

// REMOTE BITS DO RELE
RB_RELES := IED751_CMD_SEL.FM_INST_OC.stVal OR IED751_CMD_SEL.FM_INST_CC.stVal
			OR IED751_CMD_SEL.FM_INST_RB01.stVal OR IED751_CMD_SEL.FM_INST_RB02.stVal
			OR IED751_CMD_SEL.FM_INST_RB03.stVal OR IED751_CMD_SEL.FM_INST_RB04.stVal
			OR IED751_CMD_SEL.FM_INST_RB05.stVal OR IED751_CMD_SEL.FM_INST_RB06.stVal
			OR IED751_CMD_SEL.FM_INST_RB07.stVal OR IED751_CMD_SEL.FM_INST_RB08.stVal
			OR IED751_CMD_SEL.FM_INST_RB11.stVal OR IED751_CMD_SEL.FM_INST_RB12.stVal;

// VARIAVEIS LATCH
VAR_LATCH_1 := IED751_CMD_SEL.FM_INST_LT01.stVal;
VAR_LATCH_2 := IED751_CMD_SEL.FM_INST_LT02.stVal;
VAR_LATCH_3 := IED751_CMD_SEL.FM_INST_LT03.stVal;
VAR_LATCH_4 := IED751_CMD_SEL.FM_INST_LT07.stVal;
VAR_LATCH_5 := IED751_CMD_SEL.FM_INST_LT11.stVal;

// VARIAVEIS PULSO
VAR_PULSO := IED751_CMD_SEL.FM_INST_SV10T.stVal;

// EXECUCAO DO FUNCTION BLOCK
MONITOR_COMANDOS(
	COMANDOS_SCADA:=SCADA, 
	REMOTE_BITS:=RB_RELES,
	LOGICA_LATCH_1:=VAR_LATCH_1, 
	LOGICA_LATCH_2:=VAR_LATCH_2,
	LOGICA_LATCH_3:=VAR_LATCH_3,
	LOGICA_LATCH_4:=VAR_LATCH_4,
	LOGICA_LATCH_5:=VAR_LATCH_5, 
	LOGICAS_PULSO:=VAR_PULSO
);

IED751_COM_MONITOR:= MONITOR_COMANDOS.RESPOSTA_COMANDOS;
IED751_DNP.AI_00049.instMag := IED751_COM_MONITOR;
</Implementation>
    </Content>
  </POU>
</RTACModule>