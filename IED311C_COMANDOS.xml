<RTACModule>
  <POU>
    <ExportSource>
      <Schema>27</Schema>
      <DeviceMOT>3530</DeviceMOT>
    </ExportSource>
    <Name>IED311C_COMANDOS</Name>
    <POUKind>Program</POUKind>
    <Content>
      <Interface>PROGRAM IED311C_COMANDOS
VAR
	SCADA : BOOL;
	RB_RELES : BOOL;
	VAR_LATCH_1 : BOOL;
	VAR_LATCH_2 : BOOL;
	VAR_LATCH_3 : BOOL;
	VAR_LATCH_4 : BOOL;
	VAR_LATCH_5 : BOOL;
	VAR_PULSO : BOOL;
	MONITOR_COMANDOS : MONITORAMENTO_COMANDOS;
END_VAR
</Interface>
      <Implementation>// COMANDOS DO SCADA
SCADA := IED311C_DNP.BO_00000.operPulse.ctlVal OR IED311C_DNP.BO_00001.operPulse.ctlVal
	OR IED311C_DNP.BO_00002.operPulse.ctlVal OR IED311C_DNP.BO_00003.operPulse.ctlVal
	OR IED311C_DNP.BO_00004.operPulse.ctlVal OR IED311C_DNP.BO_00005.operPulse.ctlVal
	OR IED311C_DNP.BO_00006.operPulse.ctlVal OR IED311C_DNP.BO_00007.operPulse.ctlVal;

// REMOTE BITS DO RELE
RB_RELES := IED311C_CMD_SEL.FM_INST_OC.stVal OR IED311C_CMD_SEL.FM_INST_CC.stVal
			OR IED311C_CMD_SEL.FM_INST_RB1.stVal OR IED311C_CMD_SEL.FM_INST_RB2.stVal
			OR IED311C_CMD_SEL.FM_INST_RB3.stVal OR IED311C_CMD_SEL.FM_INST_RB4.stVal
			OR IED311C_CMD_SEL.FM_INST_RB5.stVal OR IED311C_CMD_SEL.FM_INST_RB6.stVal;

// VARIAVEIS LATCH
VAR_LATCH_1 := IED311C_CMD_SEL.FM_INST_LT01.stVal;
VAR_LATCH_2 := IED311C_CMD_SEL.FM_INST_LT02.stVal;
VAR_LATCH_3 := IED311C_CMD_SEL.FM_INST_LT03.stVal;

// VARIAVEIS PULSO
VAR_PULSO := IED311C_CMD_SEL.FM_INST_SV10T.stVal;

// EXECUCAO DO FUNCTION BLOCK
MONITOR_COMANDOS(
	COMANDOS_SCADA:=SCADA,
	REMOTE_BITS:=RB_RELES,
	LOGICA_LATCH_1:=VAR_LATCH_1,
	LOGICA_LATCH_2:=VAR_LATCH_2,
	LOGICA_LATCH_3:=VAR_LATCH_3,
	LOGICA_LATCH_4:=VAR_LATCH_4,
	LOGICA_LATCH_5:=VAR_LATCH_5,
	LOGICAS_PULSO:=VAR_PULSO
);

IED311C_COM_MONITOR:= MONITOR_COMANDOS.RESPOSTA_COMANDOS;
IED311C_DNP.AI_00049.instMag := IED311C_COM_MONITOR;
</Implementation>
    </Content>
  </POU>
</RTACModule>