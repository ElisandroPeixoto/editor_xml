<?xml version="1.0" encoding="utf-8"?>
<RTACModule>
  <POU>
    <ExportSource>
      <Schema>31</Schema>
      <DeviceMOT>3530</DeviceMOT>
    </ExportSource>
    <Name>IED351A_COMANDOS</Name>
    <POUKind>Program</POUKind>
    <Content>
      <Interface><![CDATA[PROGRAM IED351A_COMANDOS
VAR
	SCADA : BOOL;
	RB_RELES : BOOL;
	VAR_LATCH_1 : BOOL;
	VAR_LATCH_2 : BOOL;
	VAR_LATCH_3 : BOOL;
	VAR_LATCH_4 : BOOL;
	VAR_LATCH_5 : BOOL;
	VAR_PULSO : BOOL;
	MONITOR_COMANDOS : MONITORAMENTO_COMANDOS;
END_VAR
]]></Interface>
      <Implementation><![CDATA[// COMANDOS DO SCADA
SCADA := IED351A_DNP.BO_00000.operPulse.ctlVal OR IED351A_DNP.BO_00001.operPulse.ctlVal
	OR IED351A_DNP.BO_00002.operPulse.ctlVal OR IED351A_DNP.BO_00003.operPulse.ctlVal
	OR IED351A_DNP.BO_00004.operPulse.ctlVal OR IED351A_DNP.BO_00005.operPulse.ctlVal
	OR IED351A_DNP.BO_00006.operPulse.ctlVal OR IED351A_DNP.BO_00007.operPulse.ctlVal
	OR IED351A_DNP.BO_00008.operPulse.ctlVal OR IED351A_DNP.BO_00007.operPulse.ctlVal;

// REMOTE BITS DO RELE
RB_RELES := IED351A_CMD_SEL.FM_INST_OC.stVal OR IED351A_CMD_SEL.FM_INST_CC.stVal
			OR IED351A_CMD_SEL.FM_INST_RB1.stVal OR IED351A_CMD_SEL.FM_INST_RB2.stVal
			OR IED351A_CMD_SEL.FM_INST_RB3.stVal OR IED351A_CMD_SEL.FM_INST_RB4.stVal
			OR IED351A_CMD_SEL.FM_INST_RB5.stVal OR IED351A_CMD_SEL.FM_INST_RB6.stVal
			OR IED351A_CMD_SEL.FM_INST_RB9.stVal OR IED351A_CMD_SEL.FM_INST_RB10.stVal;

// VARIAVEIS LATCH
VAR_LATCH_1 := IED351A_CMD_SEL.FM_INST_LT1.stVal;
VAR_LATCH_2 := IED351A_CMD_SEL.FM_INST_LT2.stVal;
VAR_LATCH_3 := IED351A_CMD_SEL.FM_INST_LT3.stVal;
VAR_LATCH_3 := IED351A_CMD_SEL.FM_INST_LT7.stVal;

// VARIAVEIS PULSO
VAR_PULSO := IED351A_CMD_SEL.FM_INST_SV10T.stVal;

// EXECUCAO DO FUNCTION BLOCK
MONITOR_COMANDOS(
	COMANDOS_SCADA:=SCADA,
	REMOTE_BITS:=RB_RELES,
	LOGICA_LATCH_1:=VAR_LATCH_1,
	LOGICA_LATCH_2:=VAR_LATCH_2,
	LOGICA_LATCH_3:=VAR_LATCH_3,
	LOGICA_LATCH_4:=VAR_LATCH_4,
	LOGICA_LATCH_5:=VAR_LATCH_5,
	LOGICAS_PULSO:=VAR_PULSO
);

IED351A_COM_MONITOR:= MONITOR_COMANDOS.RESPOSTA_COMANDOS;
IED351A_DNP.AI_00049.instMag := IED351A_COM_MONITOR;]]></Implementation>
    </Content>
  </POU>
</RTACModule>